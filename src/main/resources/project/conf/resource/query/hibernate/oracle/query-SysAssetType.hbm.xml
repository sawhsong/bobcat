<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<!--/*
 * Framework Generated Hibernate Query hbm Source
 * - SYS_ASSET_TYPE - Asset Entry Type
 */-->
<hibernate-mapping>
	<sql-query name="query.SysAssetType.getAssetTypeDataSetByCriteria">
	<![CDATA[
		select com_code.code_type as common_code_type,
		       com_code.program_constants as program_constants,
		       asset_type.asset_type_id as asset_type_id,
		       asset_type.org_category as org_category,
		       (select description_${langCode} from sys_common_code where code_type = 'ORG_CATEGORY' and common_code = asset_type.org_category) as org_category_name,
		       com_code.common_code as asset_type_code,
		       com_code.description_${langCode} as asset_type_name,
		       asset_type.is_apply_gst as is_apply_gst,
		       asset_type.gst_percentage as gst_percentage,
		       asset_type.account_code as account_code,
		       to_char(asset_type.insert_date, '${dateFormat}') as insert_date,
		       to_char(asset_type.update_date, '${dateFormat}') as update_date,
		       (select count(*) from usr_asset where asset_type_id = asset_type.asset_type_id) as used_count
		  from sys_common_code com_code,
		       sys_asset_type asset_type
		 where com_code.code_type = 'ASSET_TYPE'
		   and com_code.common_code <> '0000000000'
		   and com_code.is_active = 'Y'
		   and com_code.common_code = asset_type.asset_type(+)
		${where_clause}
		${order_by_clause}
	]]>
	</sql-query>

	<sql-query name="query.SysAssetType.getMaxSortOrderDataSetByOrgCategory">
	<![CDATA[
		select nvl(max(sort_order), 0) as sort_order
		  from sys_asset_type
		 where 1 = 1
		${auto_fill}
		${where_clause}
		${order_by_clause}
	]]>
	</sql-query>
</hibernate-mapping>