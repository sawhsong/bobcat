<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<!--/*
 * Framework Generated Hibernate Query hbm Source
 * - SYS_INCOME_TYPE - Income Entry Type
 */-->
<hibernate-mapping>
	<sql-query name="query.SysIncomeType.getIncomeTypeDataSetByCriteria">
	<![CDATA[
		select com_code.code_type as common_code_type,
		       com_code.program_constants as program_constants,
		       inc_type.income_type_id as income_type_id,
		       inc_type.org_category as org_category,
		       (select description_${langCode} from sys_common_code where code_type = 'ORG_CATEGORY' and common_code = inc_type.org_category) as org_category_name,
		       com_code.common_code as income_type_code,
		       nvl(inc_type.description, com_code.description_${langCode}) as income_type_name,
		       inc_type.is_apply_gst as is_apply_gst,
		       inc_type.gst_percentage as gst_percentage,
		       inc_type.account_code as account_code,
		       to_char(inc_type.insert_date, '${dateFormat}') as insert_date,
		       to_char(inc_type.update_date, '${dateFormat}') as update_date,
		       (select count(*) from usr_income where income_type_id = inc_type.income_type_id) as used_count
		  from sys_common_code com_code,
		       sys_income_type inc_type
		 where com_code.code_type = 'INCOME_TYPE'
		   and com_code.common_code <> '0000000000'
		   and com_code.is_active = 'Y'
		   and com_code.common_code = inc_type.income_type(+)
		${auto_fill}
		${where_clause}
		${order_by_clause}
	]]>
	</sql-query>

	<sql-query name="query.SysIncomeType.getMaxSortOrderDataSetByOrgCategory">
	<![CDATA[
		select nvl(max(sort_order), 0) as sort_order
		  from sys_income_type
		 where 1 = 1
		${auto_fill}
		${where_clause}
		${order_by_clause}
	]]>
	</sql-query>
</hibernate-mapping>