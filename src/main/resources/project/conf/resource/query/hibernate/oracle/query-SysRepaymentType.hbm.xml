<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<!--/*
 * Framework Generated Hibernate Query hbm Source
 * - SYS_REPAYMENT_TYPE - Repayment Entry Type
 */-->
<hibernate-mapping>
	<sql-query name="query.SysRepaymentType.getRepaymentTypeDataSetByCriteria">
	<![CDATA[
		select com_code.code_type as common_code_type,
		       com_code.program_constants as program_constants,
		       repayment_type.repayment_type_id as repayment_type_id,
		       repayment_type.org_category as org_category,
		       (select description_${langCode} from sys_common_code where code_type = 'ORG_CATEGORY' and common_code = repayment_type.org_category) as org_category_name,
		       com_code.common_code as repayment_type_code,
		       com_code.description_${langCode} as repayment_type_name,
		       repayment_type.is_apply_gst as is_apply_gst,
		       repayment_type.gst_percentage as gst_percentage,
		       repayment_type.account_code as account_code,
		       to_char(repayment_type.insert_date, '${dateFormat}') as insert_date,
		       to_char(repayment_type.update_date, '${dateFormat}') as update_date,
		       (select count(*) from usr_finance where finance_type_id = repayment_type.repayment_type_id) as used_count
		  from sys_common_code com_code,
		       sys_repayment_type repayment_type
		 where com_code.code_type = 'REPAYMENT_TYPE'
		   and com_code.common_code <> '0000000000'
		   and com_code.is_active = 'Y'
		   and com_code.common_code = repayment_type.repayment_type(+)
		${where_clause}
		${order_by_clause}
	]]>
	</sql-query>

	<sql-query name="query.SysRepaymentType.getMaxSortOrderDataSetByOrgCategory">
	<![CDATA[
		select nvl(max(sort_order), 0) as sort_order
		  from sys_repayment_type
		 where 1 = 1
		${auto_fill}
		${where_clause}
		${order_by_clause}
	]]>
	</sql-query>
</hibernate-mapping>