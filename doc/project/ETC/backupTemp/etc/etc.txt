/**
 * Category    : USR
 * Table ID    : USR_REPAYMENT
 * Table Name  : Loan Repayment Entry
 * Description : Loan Repayment data entry for all organisation category
 */
drop table usr_repayment cascade constraints;
purge recyclebin;

create table usr_repayment (
    repayment_id                    varchar2(30)                                        not null,   -- Loan Repayment Entry UID (PK)
    repayment_year                  varchar2(4)                                         not null,   -- Year (ex. 2017)
    quarter_name                    varchar2(30)                                        not null,   -- Quarter Name (sys_common_code.quarter_name)
    org_id                          varchar2(30)                                        not null,   -- Organisation UID (sys_org.org_id)
    repayment_type_id               varchar2(30)                                        not null,   -- Repayment Type UID (sys_repayment_type.repayment_type_id)
    repayment_date                  date                                                not null,   -- Date of Repayment data entry (can be set the last date of the quarter if user does not input)
    repayment_amt                   number(12, 2),                                                  -- Amount of Repayment
    is_completed                    varchar2(30)                                        not null,   -- Is Completed (sys_common_code.simple_yn, user can not update if completed)
    description                     varchar2(1000),                                                 -- Description (Particular)
    insert_user_id                  varchar2(30),                                                   -- Insert User UID
    insert_date                     date                        default sysdate,                    -- Insert Date
    update_user_id                  varchar2(30),                                                   -- Update User UID
    update_date                     date,                                                           -- Update Date

    constraint pk_usr_repayment primary key(repayment_id)
    using index tablespace hkaccount_idx storage(initial 50k next 50k pctincrease 0)
)
pctfree 20 pctused 80 tablespace hkaccount_data storage(initial 100k next 100k maxextents 2000 pctincrease 0);

comment on table  usr_repayment                     is 'Loan Repayment Entry (Loan Repayment data entry for all organisation category)';
comment on column usr_repayment.repayment_id        is 'Loan Repayment Entry UID (PK)';
comment on column usr_repayment.repayment_year      is 'Year (ex. 2017)';
comment on column usr_repayment.quarter_name        is 'Quarter Name (sys_common_code.quarter_name)';
comment on column usr_repayment.org_id              is 'Organisation UID (sys_org.org_id)';
comment on column usr_repayment.repayment_type_id   is 'Repayment Type UID (sys_repayment_type.repayment_type_id)';
comment on column usr_repayment.repayment_date      is 'Date of Repayment data entry (can be set the last date of the quarter if user does not input)';
comment on column usr_repayment.repayment_amt       is 'Amount of Repayment';
comment on column usr_repayment.is_completed        is 'Is Completed (sys_common_code.simple_yn, user can not update if completed)';
comment on column usr_repayment.description         is 'Description (Particular)';
comment on column usr_repayment.insert_user_id      is 'Insert User UID';
comment on column usr_repayment.insert_date         is 'Insert Date';
comment on column usr_repayment.update_user_id      is 'Update User UID';
comment on column usr_repayment.update_date         is 'Update Date';


/**
 * Category    : USR
 * Table ID    : USR_BORROWING
 * Table Name  : Loan Borrowing Entry
 * Description : Loan Borrowing data entry for all organisation category
 */
drop table usr_borrowing cascade constraints;
purge recyclebin;

create table usr_borrowing (
    borrowing_id                    varchar2(30)                                        not null,   -- Loan Borrowing Entry UID (PK)
    borrowing_year                  varchar2(4)                                         not null,   -- Year (ex. 2017)
    quarter_name                    varchar2(30)                                        not null,   -- Quarter Name (sys_common_code.quarter_name)
    org_id                          varchar2(30)                                        not null,   -- Organisation UID (sys_org.org_id)
    borrowing_type_id               varchar2(30)                                        not null,   -- Borrowing Type UID (sys_borrowing_type.borrowing_type_id)
    borrowing_date                  date                                                not null,   -- Date of Borrowing data entry (can be set the last date of the quarter if user does not input)
    principal_amt                   number(12, 2),                                                  -- Amount of Principal
    interest_percentage             number(12, 2),                                                  -- Interest Rate Percentage (%)
    start_date                      date,                                                           -- Start date of borrowing
    end_date                        date,                                                           -- End date of borrowing
    is_completed                    varchar2(30)                                        not null,   -- Is Completed (sys_common_code.simple_yn, user can not update if completed)
    description                     varchar2(1000),                                                 -- Description (Particular)
    insert_user_id                  varchar2(30),                                                   -- Insert User UID
    insert_date                     date                        default sysdate,                    -- Insert Date
    update_user_id                  varchar2(30),                                                   -- Update User UID
    update_date                     date,                                                           -- Update Date

    constraint pk_usr_borrowing primary key(borrowing_id)
    using index tablespace hkaccount_idx storage(initial 50k next 50k pctincrease 0)
)
pctfree 20 pctused 80 tablespace hkaccount_data storage(initial 100k next 100k maxextents 2000 pctincrease 0);

comment on table  usr_borrowing                     is 'Loan Borrowing Entry (Loan Borrowing data entry for all organisation category)';
comment on column usr_borrowing.borrowing_id        is 'Loan Borrowing Entry UID (PK)';
comment on column usr_borrowing.borrowing_year      is 'Year (ex. 2017)';
comment on column usr_borrowing.quarter_name        is 'Quarter Name (sys_common_code.quarter_name)';
comment on column usr_borrowing.org_id              is 'Organisation UID (sys_org.org_id)';
comment on column usr_borrowing.borrowing_type_id   is 'Borrowing Type UID (sys_borrowing_type.borrowing_type_id)';
comment on column usr_borrowing.borrowing_date      is 'Date of Borrowing data entry (can be set the last date of the quarter if user does not input)';
comment on column usr_borrowing.principal_amt       is 'Amount of Principal';
comment on column usr_borrowing.interest_percentage is 'Interest Rate Percentage (%)';
comment on column usr_borrowing.start_date          is 'Start date of borrowing';
comment on column usr_borrowing.end_date            is 'End date of borrowing';
comment on column usr_borrowing.is_completed        is 'Is Completed (sys_common_code.simple_yn, user can not update if completed)';
comment on column usr_borrowing.description         is 'Description (Particular)';
comment on column usr_borrowing.insert_user_id      is 'Insert User UID';
comment on column usr_borrowing.insert_date         is 'Insert Date';
comment on column usr_borrowing.update_user_id      is 'Update User UID';
comment on column usr_borrowing.update_date         is 'Update Date';


/**
 * Category    : USR
 * Table ID    : USR_BORROWING_FILE
 * Table Name  : Attached file for usr_borrowing table
 * Description : 
 */
drop table usr_borrowing_file cascade constraints;
purge recyclebin;

create table usr_borrowing_file (
    file_id                         varchar2(30)                                        not null,   -- File item UID (PK)
    borrowing_id                    varchar2(30)                                        not null,   -- Loan Borrowing Entry UID (usr_borrowing.borrowing_id)
    original_name                   varchar2(1000)                                      not null,   -- Real file name
    new_name                        varchar2(1000)                                      not null,   -- System defined file name
    file_type                       varchar2(300),                                                  -- File type
    file_icon                       varchar2(1000),                                                 -- File Icon path and name
    file_size                       number(12,2),                                                   -- File size (KB)
    repository_path                 varchar2(1000)                                      not null,   -- Saved file path
    insert_user_id                  varchar2(30),                                                   -- Insert User UID
    insert_date                     date                        default sysdate,                    -- Insert Date
    update_user_id                  varchar2(30),                                                   -- Update User UID
    update_date                     date,                                                           -- Update Date

    constraint fk_usr_borrowing_file foreign key(borrowing_id) references usr_borrowing(borrowing_id),
    constraint pk_usr_borrowing_file primary key(file_id)

    using index tablespace hkaccount_idx storage(initial 50k next 50k pctincrease 0)
)
pctfree 20 pctused 80 tablespace hkaccount_data storage(initial 100k next 100k maxextents 2000 pctincrease 0);

comment on table  usr_borrowing_file                    is 'Attached file for Bulletin board';
comment on column usr_borrowing_file.file_id            is 'File item UID (PK)';
comment on column usr_borrowing_file.borrowing_id       is 'Loan Borrowing Entry UID (usr_borrowing.borrowing_id)';
comment on column usr_borrowing_file.original_name      is 'Real file name';
comment on column usr_borrowing_file.new_name           is 'System defined file name';
comment on column usr_borrowing_file.file_type          is 'File type';
comment on column usr_borrowing_file.file_icon          is 'File Icon path and name';
comment on column usr_borrowing_file.file_size          is 'File size (KB)';
comment on column usr_borrowing_file.repository_path    is 'Saved file path';
comment on column usr_borrowing_file.insert_user_id     is 'Insert User UID';
comment on column usr_borrowing_file.insert_date        is 'Insert Date';
comment on column usr_borrowing_file.update_user_id     is 'Update User UID';
comment on column usr_borrowing_file.update_date        is 'Update Date';


/**
 * Category    : USR
 * Table ID    : USR_LENDING
 * Table Name  : Loan Lending Entry
 * Description : Loan Lending data entry for all organisation category
 */
drop table usr_lending cascade constraints;
purge recyclebin;

create table usr_lending (
    lending_id                      varchar2(30)                                        not null,   -- Loan Lending Entry UID (PK)
    lending_year                    varchar2(4)                                         not null,   -- Year (ex. 2017)
    quarter_name                    varchar2(30)                                        not null,   -- Quarter Name (sys_common_code.quarter_name)
    org_id                          varchar2(30)                                        not null,   -- Organisation UID (sys_org.org_id)
    lending_type_id                 varchar2(30)                                        not null,   -- Lending Type UID (sys_lending_type.lending_type_id)
    lending_date                    date                                                not null,   -- Date of Lending data entry (can be set the last date of the quarter if user does not input)
    principal_amt                   number(12, 2),                                                  -- Amount of Principal
    interest_percentage             number(12, 2),                                                  -- Interest Rate Percentage (%)
    start_date                      date,                                                           -- Start date of lending
    end_date                        date,                                                           -- End date of lending
    is_completed                    varchar2(30)                                        not null,   -- Is Completed (sys_common_code.simple_yn, user can not update if completed)
    description                     varchar2(1000),                                                 -- Description (Particular)
    insert_user_id                  varchar2(30),                                                   -- Insert User UID
    insert_date                     date                        default sysdate,                    -- Insert Date
    update_user_id                  varchar2(30),                                                   -- Update User UID
    update_date                     date,                                                           -- Update Date

    constraint pk_usr_lending primary key(lending_id)
    using index tablespace hkaccount_idx storage(initial 50k next 50k pctincrease 0)
)
pctfree 20 pctused 80 tablespace hkaccount_data storage(initial 100k next 100k maxextents 2000 pctincrease 0);

comment on table  usr_lending                     is 'Loan Lending Entry (Loan Lending data entry for all organisation category)';
comment on column usr_lending.lending_id          is 'Loan Lending Entry UID (PK)';
comment on column usr_lending.lending_year        is 'Year (ex. 2017)';
comment on column usr_lending.quarter_name        is 'Quarter Name (sys_common_code.quarter_name)';
comment on column usr_lending.org_id              is 'Organisation UID (sys_org.org_id)';
comment on column usr_lending.lending_type_id     is 'Lending Type UID (sys_lending_type.lending_type_id)';
comment on column usr_lending.lending_date        is 'Date of Lending data entry (can be set the last date of the quarter if user does not input)';
comment on column usr_lending.principal_amt       is 'Amount of Principal';
comment on column usr_lending.interest_percentage is 'Interest Rate Percentage (%)';
comment on column usr_lending.start_date          is 'Start date of borrowing';
comment on column usr_lending.end_date            is 'End date of borrowing';
comment on column usr_lending.is_completed        is 'Is Completed (sys_common_code.simple_yn, user can not update if completed)';
comment on column usr_lending.description         is 'Description (Particular)';
comment on column usr_lending.insert_user_id      is 'Insert User UID';
comment on column usr_lending.insert_date         is 'Insert Date';
comment on column usr_lending.update_user_id      is 'Update User UID';
comment on column usr_lending.update_date         is 'Update Date';


/**
 * Category    : USR
 * Table ID    : USR_LENDING_FILE
 * Table Name  : Attached file for usr_lending table
 * Description : 
 */
drop table usr_lending_file cascade constraints;
purge recyclebin;

create table usr_lending_file (
    file_id                         varchar2(30)                                        not null,   -- File item UID (PK)
    lending_id                      varchar2(30)                                        not null,   -- Loan Lending Entry UID (usr_lending.lending_id)
    original_name                   varchar2(1000)                                      not null,   -- Real file name
    new_name                        varchar2(1000)                                      not null,   -- System defined file name
    file_type                       varchar2(300),                                                  -- File type
    file_icon                       varchar2(1000),                                                 -- File Icon path and name
    file_size                       number(12,2),                                                   -- File size (KB)
    repository_path                 varchar2(1000)                                      not null,   -- Saved file path
    insert_user_id                  varchar2(30),                                                   -- Insert User UID
    insert_date                     date                        default sysdate,                    -- Insert Date
    update_user_id                  varchar2(30),                                                   -- Update User UID
    update_date                     date,                                                           -- Update Date

    constraint fk_usr_lending_file foreign key(lending_id) references usr_lending(lending_id),
    constraint pk_usr_lending_file primary key(file_id)

    using index tablespace hkaccount_idx storage(initial 50k next 50k pctincrease 0)
)
pctfree 20 pctused 80 tablespace hkaccount_data storage(initial 100k next 100k maxextents 2000 pctincrease 0);

comment on table  usr_lending_file                    is 'Attached file for Bulletin board';
comment on column usr_lending_file.file_id            is 'File item UID (PK)';
comment on column usr_lending_file.lending_id         is 'Loan Lending Entry UID (usr_lending.lending_id)';
comment on column usr_lending_file.original_name      is 'Real file name';
comment on column usr_lending_file.new_name           is 'System defined file name';
comment on column usr_lending_file.file_type          is 'File type';
comment on column usr_lending_file.file_icon          is 'File Icon path and name';
comment on column usr_lending_file.file_size          is 'File size (KB)';
comment on column usr_lending_file.repository_path    is 'Saved file path';
comment on column usr_lending_file.insert_user_id     is 'Insert User UID';
comment on column usr_lending_file.insert_date        is 'Insert Date';
comment on column usr_lending_file.update_user_id     is 'Update User UID';
comment on column usr_lending_file.update_date        is 'Update Date';